---
title: "[c++/note] const μƒμ"

use_math: true
date: 2023-02-12 00:00:00 +0900
author: yejin

categories: [C++]
tags: [c++, tuto, note]

math: true
---

> π“– **μ°Έκ³  μλ£**
>
> <br>
>
> [**[Microsoft Learn]** `const` (C++)](https://learn.microsoft.com/ko-kr/cpp/cpp/const-cpp?view=msvc-170)
>
> [**[Microsoft Learn]** constexpr(C++)](https://learn.microsoft.com/ko-kr/cpp/cpp/constexpr-cpp?view=msvc-170&utm_source=chatgpt.com)
>
> <br>
>
> [**[Tistory | κ°λ°μƒλ°]** [C++] constexprμ΄λ€? constμ™€ constexprμ μ°¨μ΄](https://kfdd6630.tistory.com/entry/C-constexpr%EC%9D%B4%EB%9E%80-const%EC%99%80-constexpr%EC%9D%98-%EC%B0%A8%EC%9D%B4-const-vs-constexpr)

<br>


## κ°λ…

λ³€μμ κ°’μ„ λ³€κ²½ν•  μ μ—†λ„λ΅ μ ν•ν•λ” ν‚¤μ›λ“. λ³€μλ¥Ό μ½κΈ° μ „μ©(Read-Only)μΌλ΅ λ§λ“ λ‹¤.

`const` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•΄ λ³€μλ¥Ό μ„ μ–Έν•λ©΄ λ°λ“μ‹ μ΄κΈ° κ°’λ„ ν•¨κ» μ§€μ •ν•΄μ•Ό ν•λ‹¤.

<br>

### const int

```c++
const int a = 10;
a = 20;	// μ¤λ¥ λ°μƒ
```

*   `const int a = 10`: λ³€μ `a`λ¥Ό μƒμλ΅ μ„ μ–Έ
    *   ν¬μΈν„°λ¥Ό μ‚¬μ©ν•΄ `a`λ¥Ό κ°€λ¦¬ν‚¬ μ μμ
*   μ¤λ¥ μ½”λ“: `C3892` 'a': constμΈ λ³€μμ— ν• λ‹Ήν•  μ μ—†μµλ‹λ‹¤.

<br>

### cf) const int* const

```c++
const int a = 10;
const int* const ptr = &a;

ptr = &b;	// μ¤λ¥
*ptr = 20;	// μ¤λ¥
```

*   `const int*`: κ°€λ¦¬ν‚¤λ” κ°’μ΄ λ³€κ²½ λ¶κ°€λ¥
*   `const int* const`: ν¬μΈν„° μμ²΄λ„ λ³€κ²½ λ¶κ°€λ¥ 
    *   κ°’κ³Ό μ£Όμ† λ¨λ‘ λ³€κ²½ λ¶κ°€λ¥ (κ°’κ³Ό ν¬μΈν„°κ°€ λ¨λ‘ μƒμ)
    *   `(const int*) const`λ΅ μ΄ν•΄ν•μ! `const int*`λ¥Ό `const` ν• κ²ƒ

<br>

### μ»΄νμΌλ¬ λ™μ‘ κ³Όμ •

#### μ»΄νμΌ νƒ€μ„ μƒμ

```c++
const int MAX = 10;

int main()
{
	int a[MAX];
	std::cout << MAX << std::endl;
}
```

*   `MAX`μ κ°’μ΄ `10`μΌλ΅ ν™•μ •

    β΅οΈμ»΄νμΌλ¬λ” `MAX`κ°€ μλ” λ¨λ“  μ„μΉμ— `10`μ„ λ€μ…ν•  μ μλ‹¤!

*   `MAX`λ” μ‹¤ν–‰ μ¤‘μ— λ³„λ„μ λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήλ°›μ§€ μ•μ (μ‹¤μ  λ³€μ x)

<br>

μ»΄νμΌ νƒ€μ„μ— κ°’μ΄ κ²°μ •λ λ³€μλ¥Ό μƒμκ°’μΌλ΅ μΉν™λ  μ μλ‹¤.

μ»΄νμΌλ¬λ” μƒμλ¥Ό μ§μ ‘ λ³€μμ— λ€μ…ν•΄ λ¶ν•„μ”ν• λ©”λ¨λ¦¬ μ ‘κ·Όμ„ μ¤„μΈλ‹¤.

μ»΄νμΌλ¬κ°€ `const` λ³€μλ¥Ό μΉν™ν•μ§€ μ•λ” κ²½μ°, μΌλ°μ μΌλ΅ λ©”λ¨λ¦¬μ λ°μ΄ν„° μμ—­μ— μ €μ¥λ¨!

<br>

#### λ°νƒ€μ„ μƒμ

μ»΄νμΌλ¬κ°€ μƒμλ΅ μ΄κΈ°ν™”ν•μ§€ μ•λ” κ²½μ°, `const` λ³€μλ” μΌλ°μ μΌλ΅ λ©”λ¨λ¦¬μ λ°μ΄ν„° μμ—­μ— μ €μ¥λλ‹¤.

```c++
int main()
{
	const char* a = "hi";
	std::cout << a << std::endl;
}
```

*   λ¬Έμμ—΄ λ¦¬ν„°λ΄ `"hi"`λ” λ©”λ¨λ¦¬μ λ°μ΄ν„°(*rodata*)μ— μ €μ¥
*   ν¬μΈν„° λ³€μ `a`λ” `"hi"`μ μ£Όμ† μ €μ¥β΅οΈμ¤νƒμ— μ €μ¥!
*   μ»΄νμΌλ¬λ”  `a`μ— λ¬Έμμ—΄μ μ£Όμ† ν• λ‹Ή

<br>

>   **μ»΄νμΌ νƒ€μ„ vs λ°νƒ€μ„ `const`**
>
>   μ»΄νμΌλ¬κ°€ μ΄κΈ°ν™” o 
>
>   *   `const int a = 10`
>
>   <br>
>
>   μ»΄νμΌλ¬κ°€ μ΄κΈ°ν™” x *(λ©”λ¨λ¦¬ λ°μ΄ν„° μμ—­μ— μ €μ¥)*
>
>   *   `static const int a = 10`
>   *   `const char* a = "hi"`
>   *   `const int a[] = {1};`

<br>

### *cf)* constexpr

μ»΄νμΌ νƒ€μ„μ— κ°’μ„ ν™•μ •ν•  μ μλ” κ²½μ°, `constexpr`λ΅ μ„ μ–Έν•  μ μλ‹¤.

```c++
constexpr int a = 10;
```

*   μ»΄νμΌ νƒ€μ„μ— `a = 10`κ°€ ν™•μ •
    *   μ»΄νμΌλ¬κ°€ `a`μ λ¨λ“  μ„μΉμ— `10`μΌλ΅ μ΄κΈ°ν™”

<br>

λ‹¨, μ»΄νμΌλ¬κ°€ κ°’μ„ ν™•μ •ν•  μ μ—†λ” κ²½μ° μ¤λ¥κ°€ λ°μƒν•λ‹¤.

```c++
int main()
{
	int a = 10;
	constexpr int b = a;
	std::cout << b << std::endl;
}

/* λΉλ“ κ²°κ³Ό */
// (μ¤λ¥) C2131: μ‹μ΄ μƒμλ΅ κ³„μ‚°λμ§€ μ•μ•μµλ‹λ‹¤.
```

*   `a`λ” λ°νƒ€μ„μ—μ„ κ°’μ΄ κ²°μ •λ¨

    *   `constexpr`μ€ μ»΄νμΌ νƒ€μ„μ—μ„ λ°λ“μ‹ κ°’μ΄ κ²°μ •λμ–΄μ•Ό ν•λ―€λ΅ μ¤λ¥ λ°μƒ 

        *(`const`λ” λ©”λ¨λ¦¬μ— μ μ¬)*

<br>

λ¨λ“  `constexpr` λ³€μλ” `const` λ³€μμ΄λ―€λ΅, ν¬ν•¨κ΄€κ³„λ΅ μƒκ°ν•μ!
