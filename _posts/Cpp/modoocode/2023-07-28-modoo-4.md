---
title: "[μ”Ήμ–΄λ¨Ήλ” C++] 4. κ°μ²΄ μ§€ν–¥"

header:
  overlay_image: https://github.com/yj59/my-bohemian-life/assets/93882395/d631a73d-c035-40f0-8935-9a7101ee84db
  overlay_filter: 0.7 # ν¬λ…λ„

categories:
  - Modoocode

tags:
  - cpp
  - modoocode

toc: true
toc_sticky: true
toc_label: "reference"
toc_icon: "pen"
last_modified_at: 2023-07-28

use_math: true
---

> ***π’™ref.***
>
> 1. [**λ¨λ‘μ μ½”λ“ *μ”Ήμ–΄λ¨Ήλ” C++ - <4 - 1. μ΄ μ„Έμƒμ€ κ°μ²΄λ΅ μ΄λ£¨μ–΄μ Έ μλ‹¤>***](https://modoocode.com/172)
>
> 2. [**λ¨λ‘μ μ½”λ“ *μ”Ήμ–΄λ¨Ήλ” C++ - <4 - 2. ν΄λμ¤μ μ„Έκ³„λ΅ μ¤μ‹  κ²ƒμ„ ν™μν•©λ‹λ‹¤. (ν•¨μμ μ¤λ²„λ΅λ”©, μƒμ„±μ)>***](https://modoocode.com/173)
> 3. [**λ¨λ‘μ μ½”λ“ *μ”Ήμ–΄λ¨Ήλ” C ++ - <4 - 6. ν΄λμ¤μ explicit κ³Ό mutable ν‚¤μ›λ“>***](https://modoocode.com/253)

<br>

---

# **1. κ°μ²΄ μ§€ν–¥**

## **1.1. κ°μ²΄**

* κ°μ²΄: λ³€μλ“¤κ³Ό μ°Έκ³  μλ£λ“¤λ΅ μ΄λ£¨μ–΄μ§„ μ†ν”„νΈμ›¨μ–΄ λ©μ–΄λ¦¬
  * κ°μ²΄μ— ν¬ν•¨λ λ³€μ λ° ν•¨μ: μΈμ¤ν„΄μ¤ λ³€μ, μΈμ¤ν„΄μ¤ λ©”μ†λ“
* μ¶”μƒν™”: ν„μ‹¤ μ„Έκ³„μ κ°λ…μ„ μ»΄ν“¨ν„°κ°€ μ²λ¦¬ν•  μ μλ„λ΅ μ μ ν• ν•νƒλ΅ λ³€ν™
* μΊ΅μν™”: μ™Έλ¶€μ—μ„ λ³€μ κ°’ λ³€κ²½ λ¶κ°€, λ©”μ†λ“λ¥Ό ν†µν•΄ κ°„μ ‘ μ ‘κ·Ό
  * κ°μ²΄ λ‚΄λ¶€ λ™μ‘ μ›λ¦¬λ¥Ό λ°λΌλ„ ν•΄λ‹Ή κΈ°λ¥ μ‚¬μ© κ°€λ¥

<br>

## **1.2. ν΄λμ¤**

* κ°μ²΄μ μ„¤κ³„λ„!
* μ–΄λ– ν• κΈ°λ¥μ— λ€ν• ν‹€(λ‚΄λ¶€ κµ¬ν„ x)
  * ν΄λμ¤λ¥Ό μ΄μ©ν•΄μ„ λ§λ“¤μ–΄μ§„ κ°μ²΄λ¥Ό μΈμ¤ν„΄μ¤λΌκ³  λ¶€λ¦„
* ν΄λμ¤ κµ¬μ„± μ”μ†: λ©¤λ²„ λ³€μ, λ©¤λ²„ ν•¨μ
* `private`λ΅ μ •μλ μ”μ†λ“¤μ€ κ°μ²΄ μ™Έλ¶€μ—μ„ μ ‘κ·Ό λ¶κ°€λ¥
  * μΌλ°μ μΌλ΅ λ©¤λ²„ λ³€μλ” `private`, λ©¤λ²„ ν•¨μλ” `public`μΌλ΅ μ •μ(μΊ΅μν™”)

<br>

---

# **2. ν΄λμ¤ λ‹¤λ£¨κΈ°**

## **2.1. ν•¨μ μ¤λ²„λ΅λ”©**

```c++
#include <iostream>

void print(int x) { std::cout << "int : " << x << std::endl; }
void print(char x) { std::cout << "char : " << x << std::endl; }
void print(double x) { std::cout << "double : " << x << std::endl; }

int main()
{
  int a = 1;
  char b = 'c';
  double c = 3.2f;

  print(a);
  print(b);
  print(c);

  return 0;
}

// μ‹¤ν–‰ κ²°κ³Ό
// int : 1
// char : c
// double : 3.2
```

* ν•¨μλ…μ΄ κ°™λ”λΌλ„ μΈμκ°€ λ‹¤λ¥΄λ©΄ λ‹¤λ¥Έ ν•¨μλ΅ νλ‹¨

  * μ»΄νμΌλ¬κ°€ μ ν•©ν• μΈμλ¥Ό κ°€μ§€λ” ν•¨μλ¥Ό μ°Ύμ•„ νΈμ¶

    * μ •ν™•ν μΌμΉν•λ” νƒ€μ…μ΄ μ—†μ„ κ²½μ° ν•λ³€ν™ μν–‰

      | λ€μƒ                             | λ³€ν™ κ²°κ³Ό            |
      | -------------------------------- | -------------------- |
      | `char`, `unsigned char`, `short` | `int`                |
      | `unsigned short`                 | `int`,`unsigned int` |
      | `float`                          | `double`             |
      | `enum`                           | `int`                |

    * ν•λ³€ν™μ„ μν–‰ν•΄λ„ μΌμΉν•λ” νƒ€μ…μ ν•¨μκ°€ μ—†μ„ κ²½μ°

      | λ€μƒ                 | λ³€ν™ κ²°κ³Ό      |
      | -------------------- | -------------- |
      | μ„μμ μ«μ(numeric) | λ‹¤λ¥Έ μ«μ νƒ€μ… |
      | `enum`               | μ„μμ μ«μ    |
      | `0`                  | ν¬μΈν„°, μ«μ   |
      | ν¬μΈν„°               | `void` ν¬μΈν„°  |

    * μ μ‚¬ν• νƒ€μ…μ ν•¨μλ¥Ό μ°Ύμ„ μ μ—†μ„ κ²½μ°

      * *λ¨νΈν•λ‹¤(ambiguous)*κ³  νλ‹¨ν•΄ μ¤λ¥ λ°μƒ

        *eg) `error C2668: 'print' : ambiguous call to overloaded function`*

<br>

## **2.2. μƒμ„±μ(constructor)**

* κ°μ²΄ μƒμ„± μ‹ μλ™μΌλ΅ νΈμ¶λλ” ν•¨μ
  * ν΄λμ¤μ λ©¤λ²„ λ³€μ μ΄κΈ°ν™”
  * ν΄λμ¤ μ‚¬μ©μ— ν•„μ”ν• μ„¤μ •κ°’ μ •μ
* μƒμ„±μ μ •μ: `/* ν΄λμ¤ μ΄λ¦„ */ (/* μΈμ */) {}`
* μƒμ„±μ μ ν•
  * μ•”μ‹μ  λ°©λ²•(implicit): `Date day(2011, 3, 1);`
  * λ…μ‹μ  λ°©λ²•(explicit): `Date day = Date(2012, 3, 1);`

<br>

### **2.2.1 λ””ν΄νΈ μƒμ„±μ (Default Constructor)**

* μƒμ„±μλ¥Ό λ…μ‹μ μΌλ΅ μ •μν•μ§€ μ•μ•μ„ κ²½μ° μ»΄νμΌλ¬κ°€ μλ™μΌλ΅ μ¶”κ°€ν•΄μ£Όλ” μƒμ„±μ
  * κ°λ°μκ°€ μƒμ„±μλ¥Ό μ •μν•μ§€ μ•μ•„λ„ μƒμ„±μκ°€ νΈμ¶λ¨!
  * λ‹¨, μ»΄νμΌλ¬κ°€ μƒμ„±ν–μΌλ―€λ΅ μ•„λ¬΄λ° λ™μ‘λ„ ν•μ§€ μ•μ
* λ””ν΄νΈ μƒμ„±μ μ‚¬μ©μ μ •μ κ°€λ¥

```c++
#include <iostream>

class Date {
  int year_;
  int month_;  // 1 λ¶€ν„° 12 κΉμ§€.
  int day_;    // 1 λ¶€ν„° 31 κΉμ§€.

 public:
  void ShowDate();

Date()		// λ””ν΄νΈ μƒμ„±μ μ •μ
  {
    year_ = 2012;
    month_ = 7;
    day_ = 12;
  }
};
```

<br>

C++ 11λ¶€ν„° λ””ν΄νΈ μƒμ„±μλ¥Ό λ…μ‹μ μΌλ΅ μ •μν•  μ μλ‹¤!

```c++
class Test 
{
 public:
  Test() = default;  // λ””ν΄νΈ μƒμ„±μ μ •μ λ…λ Ήμ–΄
};
```

* μƒμ„±μ μ„ μ–Έ λ’¤μ— `= default`λ¥Ό λ¶™μ—¬ λ””ν΄νΈ μƒμ„±μ λ…μ‹

<br>

### **2.2.2 μƒμ„±μ μ¤λ²„λ΅λ”©**

```c++
#include <iostream>

class Date {
  int year_;
  int month_;  // 1 λ¶€ν„° 12 κΉμ§€.
  int day_;    // 1 λ¶€ν„° 31 κΉμ§€.

 public:
  void ShowDate();

  Date() 
  {
    std::cout << "κΈ°λ³Έ μƒμ„±μ νΈμ¶!" << std::endl;
    year_ = 2012;
    month_ = 7;
    day_ = 12;
  }

  Date(int year, int month, int day) 
  {
    std::cout << "μΈμ 3 κ°μΈ μƒμ„±μ νΈμ¶!" << std::endl;
    year_ = year;
    month_ = month;
    day_ = day;
  }
};
```

* μΈμλ¥Ό λ‹¤λ¥΄κ² ν• μ—¬λ¬ κ°μ μƒμ„±μλ¥Ό μ •μν•΄ μ¤λ²„λ΅λ”© κµ¬ν„ κ°€λ¥

<br>

---

# **3. explicit / mutable**

## **3.1. explicit**

* μ›ν•μ§€ μ•λ” μ•”μ‹μ  λ³€ν™μ„ ν•  μ μ—†λ„λ΅ μ»΄νμΌλ¬μ—κ² λ…μ‹

<br>

**μμ 1** *- μ•”μ‹μ  λ³€ν™ λ°©μ§€*

```c++
class MyString 
{
  char* string_content;  // λ¬Έμμ—΄ λ°μ΄ν„°λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°
  int string_length;     // λ¬Έμμ—΄ κΈΈμ΄

  int memory_capacity;

 public:
  // capacity λ§νΌ λ―Έλ¦¬ ν• λ‹Ήν•¨. (explicit ν‚¤μ›λ“μ— μ£Όλ©)
  explicit MyString(int capacity);

  // λ¬Έμμ—΄λ΅ λ¶€ν„° μƒμ„±
  MyString(const char* str);

  // λ³µμ‚¬ μƒμ„±μ
  MyString(const MyString& str);

  ~MyString();

  int length() const;
  int capacity() const;
};

// .. (μƒλµ) ..

void DoSomethingWithString(MyString s) 
{
  // Do something...
}

int main() 
{
  DoSomethingWithString(3);  // ????
}

// μ»΄νμΌ μ¤λ¥
// test5.cc:56:3: error: no matching function for call to 'DoSomethingWithString'
//   DoSomethingWithString(3); // ????
//   ^~~~~~~~~~~~~~~~~~~~~
// test5.cc:51:6: note: candidate function not viable: no known conversion from 'int' to 'MyString' for 1st argument
// void DoSomethingWithString(MyString s) {
//      ^
// 1 error generated.
```

* `int capacity`λ¥Ό λ°›λ” μƒμ„±μκ°€ `explicit`μΌλ΅ λ…μ‹
  * `MyString` μƒμ„±μλ¥Ό `explicit`μΌλ΅ μ„ μ–Έν•΄ ν•΄λ‹Ή μƒμ„±μλ¥Ό μ΄μ©ν• μ•”μ‹μ  λ³€ν™ λ°©μ§€
    * `int`μ—μ„ `MyString`μΌλ΅ λ³€ν™ λ¶κ°€λ¥

<br>

**μμ 2** *-λ³µμ‚¬ μƒμ„±μ νΈμ¶ λ°©μ§€*

```c++
MyString s = "abc";  // MyString s("abc")
MyString s = 5;      // MyString s(5)
```

* μ»΄νμΌλ¬κ°€ μ μ ν• μƒμ„±μλ¥Ό νΈμ¶
  * `s`μ— κ°’μ„ λ€μ…ν•λ‹¤λ” μλ―Έ

```
MyString s(5);   // ν—μ©
MyString s = 5;  // μ»΄νμΌ μ¤λ¥!
```

* `explicit`μΌλ΅ `MyString(int capacity)`λ¥Ό μ„¤μ •ν•  κ²½μ° μ»΄νμΌ μ¤λ¥ λ°μƒ(λ³µμ‚¬ μƒμ„±μ ν•νƒ νΈμ¶ λ°©μ§€)

<br>

## **3.2. mutable**

λ©¤λ²„ λ³€μλ¥Ό `mutable`λ΅ μ„ μ–Έν•  κ²½μ° `const`ν•¨μμ λ©¤λ²„ λ³€μλ¥Ό λ³€κ²½ν•  μ μλ‹¤.

* λ©¤λ²„ ν•¨μλ¥Ό `const`λ΅ μ„ μ–Έν•λ” μ΄μ : ν•΄λ‹Ή ν•¨μλ” κ°μ²΄ λ‚΄λ¶€ μƒνƒμ— μν–¥μ„ μ£Όμ§€ μ•λ”λ‹¤λ” μλ―Έ ν‘ν„
  * *eg) μ½κΈ° μ‘μ—…μ„ μν–‰ν•λ” ν•¨μ*
* μ„λ²„μ κ²½μ° λ©”λ¨λ¦¬μ— μΊμ‹λ¥Ό λ§λ“¤μ–΄ μμ£Ό μ”μ²­λλ” λ°μ΄ν„°λ¥Ό λΉ λ¥΄κ² μ΅°ν
  * μ¦‰κ° μΊμ‹λ¥Ό κ°±μ‹ ν•κΈ° μ„ν•΄ `const`λ΅ μ •μλ μ μ € μ„λ²„ ν•¨μμ `Cache`λ¥Ό `mutable`λ΅ μ„ μ–Έν•΄ κ΄€λ¦¬

<br>

```c++
#include <iostream>

class A 
{
  mutable int data_;	// mutableλ΅ μ„ μ–Έν• data_

 public:
  A(int data) : data_(data) {}
  void DoSomething(int x) const 
  {
    data_ = x;
  }

  void PrintData() const { std::cout << "data: " << data_ << std::endl; }
};

int main() 
{
  A a(10);
  a.DoSomething(3);
  a.PrintData();
}
```

* `mutable`λ΅ μ„ μ–Έν• `data_`μ κ°’μ΄ `const` ν•¨μ λ‚΄λ¶€μ—μ„ λ³€κ²½λ¨
  * `mutable`λ΅ μ„ μ–Έν•μ§€ μ•μ„ κ²½μ° `const` ν•¨μμ λ©¤λ²„ λ³€μμ— κ°’ λ€μ… λ¶κ°€λ¥

